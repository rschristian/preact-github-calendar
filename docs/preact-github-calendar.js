import{h as t,Fragment as e}from"https://cdn.skypack.dev/preact";import{useState as n,useEffect as r}from"https://cdn.skypack.dev/preact/hooks";import o from"https://cdn.skypack.dev/preact-hint";const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function i(i){const{blockMargin:s,blockSize:l,contributionColorArray:c,labelFontSize:u,showWeekdaysLabels:p,showTooltip:h}=Object.assign({blockMargin:2,blockSize:12,contributionColorArray:["#ebedf0","#9be9a8","#40c463","#30a14e","#216e39"],labelFontSize:14,showWeekdaysLabels:!1,showTooltip:!0},i.options),[b,d]=n(null),[g,m]=n("");return r(()=>{(async function(){d(null),m("");try{const t=await(await fetch(`https://gh-calendar.rschristian.dev/user/${i.username}`)).json();if("message"in t)return m(t.message);if(!("total"in t)||!("contributions"in t))return m("Invalid response data");d(t)}catch(t){m("Unknown Error")}})().then()},[i.username]),t(e,null,null!==b?t("figure",{class:"github-calendar"},t("div",{class:"github-calendar__graph"},t(o,{template:n=>{const r=n.split(","),o=r[1].split("-"),i=`${a[Number(o[1])-1]} ${+o[2]}, ${o[0]}`;return t(e,null,t("strong",null,r[0]," Contributions")," on ",i)}},t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:`0 0 ${53*(l+s)-s+(p?2.4*(l+s):0)} ${7*(l+s)-s+1.5*u}`},p&&["Mon","Wed","Fri"].map((e,n)=>t("text",{key:e,class:"github-calendar__graph-label",style:{fontSize:u},x:0,y:1.5*u+(l+s)*(2*(n+1)-1)+(l-1)},e)),function(){const e=[];for(let t=0;t<b.contributions.length-1;t++)e.push(b.contributions[t][0]);let n=0;const r=e.map((e,r)=>{const o=e.date.split("-"),i=Number(o[1])-1;if(i!==n)return n=i,t("text",{key:`${a[i]}-${o[0]}`,class:"github-calendar__graph-label",style:{fontSize:u},x:(p?2.4*(l+s):0)+(l+s)*r,y:u},a[i])}).filter(t=>void 0!==t);return r[1].props.x-r[0].props.x<=2*(l+s)&&r.shift(),r}(),b.contributions.map(e=>e.map((e,n)=>t("rect",{key:e.date,x:"0",y:1.5*u+(l+s)*n,width:l,height:l,fill:c[e.intensity],"data-preact-hint":h?[e.count,e.date]:null}))).map((e,n)=>t("g",{key:n,transform:`translate(${(p?2.4*(l+s):0)+(l+s)*n}, 0)`},e)))),t("div",{class:"github-calendar__graph-footer"},t("div",{style:{float:"left"}},"Sum of pull requests, issues opened, and commits made by"," ",t("a",{href:`https://github.com/${i.username}`,target:"blank"},"@",i.username)),t("div",{style:{float:"right"}},"Less",t("ul",{class:"github-calendar__graph-legend"},c.map(e=>t("li",{key:e,class:"github-calendar__graph-legend-item",style:{width:l-2,height:l-2,backgroundColor:e}}))),"More"))),t("div",{class:"github-calendar__footer"},t("span",null,"Contributions in the last year"),t("span",{class:"github-calendar__footer-contribution-count"},b.total.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," Total"),t("span",null,function(){const t=b.contributions.length-1,e=b.contributions[0][0].date.split("-"),n=b.contributions[t][b.contributions[t].length-1].date.split("-");return`${a[Number(e[1])-1]} ${+e[2]}, ${e[0]} - ${a[Number(n[1])-1]} ${+n[2]}, ${n[0]}`}()))):g?t("div",{class:"github-calendar__error"},g):t("noscript",null,"This component requires JS in order to function properly."))}export default i;
